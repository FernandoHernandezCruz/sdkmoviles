"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[943],{943:(ge,O,c)=>{c.r(O),c.d(O,{FolderPageModule:()=>oe});var m=c(6814),_=c(95),a=c(878),h=c(9481),p=c(5861),e=c(6689),u=c(9862),M=c(553),A=c(5592),P=c(3248),C=c(9894),Z=c(2014),U=c(2333),w=c(6988),J=c(5472);function F(i,r){1&i&&e._UZ(0,"ion-icon",9)}function S(i,r){if(1&i){const o=e.EpF();e.TgZ(0,"ion-item",1),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.openQuote())}),e._UZ(1,"div",2),e.TgZ(2,"ion-label",3)(3,"ion-card-title",4),e._uU(4),e.qZA(),e.TgZ(5,"h2"),e._uU(6),e.TgZ(7,"span",5)(8,"ion-note"),e._uU(9),e.qZA(),e.YNc(10,F,1,0,"ion-icon",6),e.qZA()(),e.TgZ(11,"h3"),e._uU(12),e.qZA(),e.TgZ(13,"ion-chip")(14,"ion-avatar"),e._UZ(15,"img",7),e.qZA(),e.TgZ(16,"ion-label"),e._uU(17),e.qZA()(),e.TgZ(18,"ion-chip")(19,"ion-avatar"),e._UZ(20,"img",8),e.qZA(),e.TgZ(21,"ion-label"),e._uU(22),e.qZA()()()()}if(2&i){const o=e.oxw();e.Q6J("routerLink","/operation/"+o.message.id),e.xp6(1),e.Tol(o.isRead?"dot":"dot dot-unread"),e.xp6(3),e.AsE("",o.translationService.getTranslation("operation")," ",o.message.id,""),e.xp6(2),e.lnq(" ",o.translationService.getTranslation("route")," ",o.message.airportDeparture," - ",o.message.airportArrival," "),e.xp6(3),e.Oqu(o.message.tail),e.xp6(1),e.Q6J("ngIf",o.isIos()),e.xp6(2),e.AsE(" ",o.translationService.getTranslation("flight")," ",o.message.flightType," "),e.xp6(5),e.AsE("",o.translationService.getTranslation("etd")," ",o.message.etd,""),e.xp6(5),e.AsE("",o.translationService.getTranslation("eta")," ",o.message.eta,"")}}let q=(()=>{var i;class r{constructor(n,t,l,s){this.translationService=n,this.http=t,this.storage=l,this.modalController=s,this.platform=(0,e.f3M)(J.t4),this.appUrl=M.N.apiUrl,this.isRead=!1}ngOnInit(){this.checkReadStatus()}isIos(){return this.platform.is("ios")}markAsRead(){var n=this;return(0,p.Z)(function*(){var t;yield n.storage.set(`message_${null===(t=n.message)||void 0===t?void 0:t.id}_read`,!0),n.isRead=!0})()}checkReadStatus(){var n=this;return(0,p.Z)(function*(){var t;(yield n.storage.get(`message_${null===(t=n.message)||void 0===t?void 0:t.id}_read`))&&(n.isRead=!0)})()}openQuote(){var n=this;return(0,p.Z)(function*(){yield n.markAsRead()})()}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(C.D),e.Y36(u.eN),e.Y36(Z.K),e.Y36(a.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-message"]],inputs:{message:"message"},decls:1,vars:1,consts:[[3,"routerLink","click",4,"ngIf"],[3,"routerLink","click"],["slot","start"],[1,"ion-text-wrap"],[2,"font-size","larger"],[1,"date"],["aria-hidden","true","size","small",4,"ngIf"],["alt","Airplane ","src","assets/icon/airplane_departure.svg"],["alt","Airplane Arrival","src","assets/icon/airplane_arrival.svg"],["aria-hidden","true","size","small"]],template:function(n,t){1&n&&e.YNc(0,S,23,16,"ion-item",0),2&n&&e.Q6J("ngIf",t.message)},dependencies:[m.O5,a.BJ,a.Dq,a.hM,a.gu,a.Ie,a.Q$,a.uN,a.YI,h.rH],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}ion-label[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin:0;color:#2c3e52}ion-item[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#085588}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:95%}ion-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{float:right;align-items:center;display:flex}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#c9c9ca}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:15px;margin-right:8px;font-weight:400}ion-item[_ngcontent-%COMP%]   ion-note.md[_ngcontent-%COMP%]{margin-right:14px}.dot[_ngcontent-%COMP%]{display:block;height:12px;width:12px;border-radius:50%;align-self:start;margin:16px 10px 16px 16px}.dot-unread[_ngcontent-%COMP%]{background:var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:11px;font-weight:400}ion-chip[_ngcontent-%COMP%]{width:auto;height:20px}"]}),r})();var T=c(9599);function N(i,r){1&i&&e._UZ(0,"img",16)}function I(i,r){if(1&i&&e._UZ(0,"img",17),2&i){const o=e.oxw();e.Q6J("src",o.appUrl+o.avatar,e.LSH)}}let k=(()=>{var i;class r{constructor(n,t,l,s,g){this.http=n,this.storage=t,this.loadingController=l,this.cdr=s,this.translationService=g,this.name="",this.lastname="",this.email="",this.clave="",this.phone="",this.airport="",this.avatar="",this.license_agent="",this.appUrl=M.N.apiUrl,this.icao="",this.bir="",this.isAlertOpen=!1,this.alertButtons=["OK"]}ngOnInit(){var n=this;return(0,p.Z)(function*(){const t=yield n.storage.get("user");if(t){n.username=t.id;const l=yield n.storage.get("access_token"),s=new u.WM({Authorization:`Bearer ${l}`});n.http.get(n.appUrl+"api/auth/get-agent/"+n.username,{headers:s}).subscribe(g=>{g&&(n.name=g.name,n.lastname=g.rfc||"",n.email=g.email,n.license_agent=g.license_agent,n.phone=g.phones,n.bir=new Date(g.birthday_date).toISOString().split("T")[0],n.clave=g.interbank_key,n.airport=g.airport.name,n.icao=g.airport.icao_code,n.avatar=g.avatar)},g=>{console.error("Error al obtener datos del agente:",g)})}})()}setOpen(n){this.isAlertOpen=n}changePhoto(){var n=this;return(0,p.Z)(function*(){try{const t=yield T.V1.getPhoto({quality:90,allowEditing:!0,resultType:T.dk.DataUrl,source:T.oK.Prompt});if(t.dataUrl){n.loading=yield n.loadingController.create({cssClass:"custom-spinner",spinner:null,translucent:!0,backdropDismiss:!1}),yield n.loading.present();const l=new Image;l.src=t.dataUrl,l.onload=(0,p.Z)(function*(){let d=l.width,f=l.height;l.width>800&&(d=800,f=800*l.height/l.width),f>800&&(d=800*d/f,f=800);const v=document.createElement("canvas");v.width=d,v.height=f;const b=v.getContext("2d");b?b.drawImage(l,0,0,d,f):console.error("El contexto de dibujo es nulo");const ae=v.toDataURL("image/jpeg",.8),re=n.dataURLtoBlob(ae),y=new FormData;y.append("avatar",re);const se=yield n.storage.get("access_token"),le=new u.WM({Authorization:`Bearer ${se}`});n.http.post(n.appUrl+"api/auth/update-agent/"+n.username,y,{headers:le}).subscribe(x=>{n.avatar=x.data.avatar,n.cdr.detectChanges(),n.loading.dismiss()},x=>{console.error("Error updating profile",x),n.messsageAlert=x.error.description.join(", "),n.isAlertOpen=!0,n.loading.dismiss()})})}else console.error("No se pudo obtener la imagen."),n.loading.dismiss()}catch(t){console.error("Error al cambiar la foto de perfil",t),n.loading.dismiss()}finally{n.loading.dismiss()}})()}dataURLtoBlob(n){const t=atob(n.split(",")[1]),l=n.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(t.length),g=new Uint8Array(s);for(let d=0;d<t.length;d++)g[d]=t.charCodeAt(d);return new Blob([s],{type:l})}sendProfile(){var n=this;return(0,p.Z)(function*(){n.loading=yield n.loadingController.create({cssClass:"custom-spinner",spinner:null,translucent:!0,backdropDismiss:!1}),yield n.loading.present();const t=new FormData;n.name&&t.append("name",n.name),n.license_agent&&t.append("license_agent",n.license_agent),n.lastname&&t.append("rfc",n.lastname),n.bir&&t.append("birthday_date",n.bir),n.email&&t.append("email",n.email),n.clave&&t.append("interbank_key",n.clave),n.phone&&t.append("phones",n.phone),n.blob&&t.append("avatar",n.blob);const l=yield n.storage.get("access_token"),s=new u.WM({Authorization:`Bearer ${l}`});n.http.post(n.appUrl+"api/auth/update-agent/"+n.username,t,{headers:s}).subscribe(g=>{n.avatar=g.avatar,n.cdr.detectChanges(),n.loading.dismiss()},g=>{console.error("Error updating profile",g),n.messsageAlert=g.error.description.join(", "),n.isAlertOpen=!0,n.loading.dismiss()})})()}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(u.eN),e.Y36(Z.K),e.Y36(a.HT),e.Y36(e.sBO),e.Y36(C.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],decls:47,vars:22,consts:[["alt","Silhouette of mountains","src","../../../assets/avion2.jpeg",1,"back-image"],["class","profile-image","src","../../../assets/profile2.jpeg","alt","User Profile Image",4,"ngIf"],["ion-button","",1,"change-photo-btn",3,"click"],["name","camera",1,"camera"],["class","profile-image-btn","alt","User Profile Image",3,"src",4,"ngIf"],[1,"centered-header"],["lines","full",1,"ion-padding-top"],["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],["type","email",3,"ngModel","ngModelChange"],["type","tel",3,"ngModel","ngModelChange"],["size","12","offset","4"],[1,"custom-button",3,"click"],["name","send-outline"],["header","Alert Error!","subHeader","The action could not be completed",3,"isOpen","message","buttons","didDismiss"],["src","../../../assets/profile2.jpeg","alt","User Profile Image",1,"profile-image"],["alt","User Profile Image",1,"profile-image-btn",3,"src"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-card"),e._UZ(1,"img",0),e.YNc(2,N,1,0,"img",1),e.TgZ(3,"button",2),e.NdJ("click",function(){return t.changePhoto()}),e._UZ(4,"ion-icon",3),e.YNc(5,I,1,1,"img",4),e.qZA(),e.TgZ(6,"ion-card-header",5)(7,"ion-card-title"),e._uU(8),e.qZA(),e.TgZ(9,"ion-card-subtitle"),e._uU(10),e.qZA()()(),e.TgZ(11,"ion-list",6)(12,"ion-item")(13,"ion-label",7),e._uU(14),e.qZA(),e.TgZ(15,"ion-input",8),e.NdJ("ngModelChange",function(s){return t.name=s}),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label",7),e._uU(18),e.qZA(),e.TgZ(19,"ion-input",8),e.NdJ("ngModelChange",function(s){return t.license_agent=s}),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-label",7),e._uU(22),e.qZA(),e.TgZ(23,"ion-input",8),e.NdJ("ngModelChange",function(s){return t.lastname=s}),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-label",7),e._uU(26),e.qZA(),e.TgZ(27,"ion-input",9),e.NdJ("ngModelChange",function(s){return t.bir=s}),e.qZA()(),e.TgZ(28,"ion-item")(29,"ion-label",7),e._uU(30),e.qZA(),e.TgZ(31,"ion-input",10),e.NdJ("ngModelChange",function(s){return t.email=s}),e.qZA()(),e.TgZ(32,"ion-item")(33,"ion-label",7),e._uU(34),e.qZA(),e.TgZ(35,"ion-input",8),e.NdJ("ngModelChange",function(s){return t.clave=s}),e.qZA()(),e.TgZ(36,"ion-item")(37,"ion-label",7),e._uU(38),e.qZA(),e.TgZ(39,"ion-input",11),e.NdJ("ngModelChange",function(s){return t.phone=s}),e.qZA()()(),e.TgZ(40,"ion-grid")(41,"ion-row")(42,"ion-col",12)(43,"ion-button",13),e.NdJ("click",function(){return t.sendProfile()}),e._UZ(44,"ion-icon",14),e._uU(45),e.qZA()()()(),e.TgZ(46,"ion-alert",15),e.NdJ("didDismiss",function(){return t.setOpen(!1)}),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",!t.avatar),e.xp6(3),e.Q6J("ngIf",t.avatar),e.xp6(3),e.Oqu(t.airport),e.xp6(2),e.Oqu(t.icao),e.xp6(4),e.Oqu(t.translationService.getTranslation("name")),e.xp6(1),e.Q6J("ngModel",t.name),e.xp6(3),e.Oqu(t.translationService.getTranslation("license")),e.xp6(1),e.Q6J("ngModel",t.license_agent),e.xp6(3),e.Oqu(t.translationService.getTranslation("rfc")),e.xp6(1),e.Q6J("ngModel",t.lastname),e.xp6(3),e.Oqu(t.translationService.getTranslation("birth")),e.xp6(1),e.Q6J("ngModel",t.bir),e.xp6(3),e.Oqu(t.translationService.getTranslation("email")),e.xp6(1),e.Q6J("ngModel",t.email),e.xp6(3),e.Oqu(t.translationService.getTranslation("clabe")),e.xp6(1),e.Q6J("ngModel",t.clave),e.xp6(3),e.Oqu(t.translationService.getTranslation("phone")),e.xp6(1),e.Q6J("ngModel",t.phone),e.xp6(6),e.hij(" \xa0",t.translationService.getTranslation("send")," "),e.xp6(1),e.Q6J("isOpen",t.isAlertOpen)("message",t.messsageAlert)("buttons",t.alertButtons))},dependencies:[m.O5,_.JJ,_.On,a.Ge,a.YG,a.PM,a.Zi,a.tO,a.Dq,a.wI,a.jY,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.Nd,a.j9],styles:[".card-image-wrapper[_ngcontent-%COMP%]{position:relative}.profile-image[_ngcontent-%COMP%]{position:absolute;top:50%;left:186%;transform:translate(-50%,-50%);width:80px;height:80px;border-radius:50%;border:3px solid white;z-index:2}.profile-image-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);border-radius:50%;z-index:-1}.back-image[_ngcontent-%COMP%]{width:100%;height:200px}.centered-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.change-photo-btn[_ngcontent-%COMP%]{position:absolute;top:30%;left:36%;background-color:#00000080;color:#fff;border-radius:50%;width:100px;height:100px;z-index:5}.camera[_ngcontent-%COMP%]{z-index:10}"]}),r})();const Y=function(i){return{text:"OK",handler:i}},z=function(i){return[i]};let Q=(()=>{var i;class r{constructor(n){this.translationService=n,this.currentLanguage="es",this.alertButtons=["OK"],this.alertInputs=[{label:"Espa\xf1ol",type:"radio",value:"es"},{label:"English",type:"radio",value:"en"}],this.changeLanguage=t=>{this.currentLanguage=t,this.translationService.setLanguage(this.currentLanguage)},this.currentLanguage=n.currentLanguage,this.setDefaultLanguage()}ngOnInit(){}setDefaultLanguage(){const n=localStorage.getItem("selectedLanguage");n&&this.alertInputs.find(t=>t.value===n)&&(this.currentLanguage=n,this.alertInputs.forEach(t=>{t.checked=t.value===this.currentLanguage}))}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(C.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-help"]],decls:12,vars:11,consts:[[3,"fixed"],[1,"ion-align-items-center"],["size","6",1,"ion-text-center"],["id","present-alert"],[1,"select-btn"],["trigger","present-alert",3,"header","buttons","inputs"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-grid",0)(5,"ion-row",1)(6,"ion-col",2)(7,"ion-button",3),e._uU(8),e.qZA(),e.TgZ(9,"div",4),e._uU(10),e.qZA(),e._UZ(11,"ion-alert",5),e.qZA()()()()),2&n&&(e.xp6(3),e.hij(" ",t.translationService.getTranslation("help"),""),e.xp6(1),e.Q6J("fixed",!0),e.xp6(4),e.hij("",t.translationService.getTranslation("languaje")," "),e.xp6(2),e.Oqu(t.translationService.getTranslation("languageselect")),e.xp6(1),e.s9C("header",t.translationService.getTranslation("languaje")),e.Q6J("buttons",e.VKq(9,z,e.VKq(7,Y,t.changeLanguage)))("inputs",t.alertInputs))},dependencies:[a.Ge,a.YG,a.PM,a.Zi,a.Dq,a.wI,a.jY,a.Nd],styles:["ion-grid[_ngcontent-%COMP%]{--ion-grid-padding: 20px;--ion-grid-padding-xs: 20px;--ion-grid-padding-sm: 20px;--ion-grid-padding-md: 20px;--ion-grid-padding-lg: 20px;--ion-grid-padding-xl: 20px;--ion-grid-column-padding: 10px;--ion-grid-column-padding-xs: 10px;--ion-grid-column-padding-sm: 30px;--ion-grid-column-padding-md: 30px;--ion-grid-column-padding-lg: 30px;--ion-grid-column-padding-xl: 30px}ion-col[_ngcontent-%COMP%]{background-color:var(--ion-background-color);text-align:center}.profile-image[_ngcontent-%COMP%]{width:50%;height:auto;border-radius:80%;border:0px solid white;display:block;margin:0 auto}.select-btn[_ngcontent-%COMP%], .ion-align-items-center[_ngcontent-%COMP%]{align-items:center!important}.ion-text-center[_ngcontent-%COMP%]{text-align:center!important}"]}),r})();var B=c(589);function E(i,r){if(1&i&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&i){const o=r.$implicit;e.xp6(3),e.Oqu(o.title),e.xp6(2),e.Oqu(o.body)}}let D=(()=>{var i;class r{constructor(n,t,l,s,g){this.storage=n,this.translationService=t,this.toastController=l,this.router=s,this.notificationHandlerService=g,this.notifications=[],this._storage=null,this.init()}init(){var n=this;return(0,p.Z)(function*(){const t=yield n.storage.create();n._storage=t})()}ngOnInit(){var n=this;return(0,p.Z)(function*(){const t=yield n.storage.get("notifications");t&&(n.notifications=t,n.notifications.reverse()),n.notifications=n.notificationHandlerService.notifications})()}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(Z.K),e.Y36(C.D),e.Y36(a.yF),e.Y36(h.F0),e.Y36(B.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification"]],decls:4,vars:2,consts:[[1,"h3-center"],["name","notifications-outline"],[4,"ngFor","ngForOf"]],template:function(n,t){1&n&&(e.TgZ(0,"h3",0),e._UZ(1,"ion-icon",1),e._uU(2),e.qZA(),e.YNc(3,E,6,2,"ion-item",2)),2&n&&(e.xp6(2),e.hij("\xa0",t.translationService.getTranslation("notifications")," "),e.xp6(1),e.Q6J("ngForOf",t.notifications))},dependencies:[m.sg,a.gu,a.Ie,a.Q$],styles:[".h3-center[_ngcontent-%COMP%]{text-align:center}"]}),r})();function j(i,r){1&i&&e._UZ(0,"app-message",7),2&i&&e.Q6J("message",r.$implicit)}function L(i,r){if(1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,j,1,1,"app-message",6),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.messages)}}function H(i,r){1&i&&e._UZ(0,"app-message",7),2&i&&e.Q6J("message",r.$implicit)}function R(i,r){if(1&i&&(e.ynx(0),e.YNc(1,H,1,1,"app-message",6),e.BQk()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.messages)}}function $(i,r){if(1&i){const o=e.EpF();e.TgZ(0,"ion-list")(1,"ion-grid")(2,"ion-row")(3,"ion-searchbar",8),e.NdJ("ionChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.updateData(t))}),e.qZA()()(),e.YNc(4,R,2,1,"ng-container",5),e.qZA()}if(2&i){const o=e.oxw();e.xp6(3),e.s9C("placeholder",o.translationService.getTranslation("search")),e.xp6(1),e.Q6J("ngIf",o.messages&&o.messages.length>0)}}function K(i,r){1&i&&(e.TgZ(0,"ion-list"),e._UZ(1,"app-profile"),e.qZA())}function G(i,r){1&i&&(e.TgZ(0,"ion-list"),e._UZ(1,"app-help"),e.qZA())}function W(i,r){1&i&&(e.TgZ(0,"ion-list"),e._UZ(1,"app-notification"),e.qZA())}const V=[{path:"",component:(()=>{var i;class r{constructor(n,t,l,s,g,d,f,v){this.http=n,this.loadingController=t,this.translationService=l,this.storage=s,this.alertController=g,this.authService=d,this.router=f,this.tokenService=v,this.apiUrl=M.N.apiUrl,this.activatedRoute=(0,e.f3M)(h.gz),this.appUrl=M.N.apiUrl,this.messages=[]}refresh(n){setTimeout(()=>{n.detail.complete()},3e3)}ngOnInit(){var n=this;return(0,p.Z)(function*(){n.folder=n.activatedRoute.snapshot.paramMap.get("id"),n.loading=yield n.loadingController.create({cssClass:"custom-spinner",spinner:null,translucent:!0,backdropDismiss:!1}),yield n.loading.present();const t=yield n.storage.get("user"),l=yield n.storage.get("access_token");if(t&&t.id&&l){const s=new u.WM({Authorization:`Bearer ${l}`});n.http.get(`${n.apiUrl}api/auth/agent/${t.id}`,{headers:s}).subscribe(g=>{n.loading.dismiss(),Array.isArray(g)?n.messages=g:(console.error("La respuesta no es un array v\xe1lido:",g),n.showInvalidResponseAlert(),n.logout())},g=>{n.loading.dismiss(),console.error("Error al realizar la solicitud HTTP",g)})}else n.loading.dismiss(),n.logout();P.V.requestPermissions().then(s=>{"granted"===s.receive&&P.V.register()}),P.V.addListener("registration",s=>{n.tokenService.saveToken(s.value)}),P.V.addListener("registrationError",s=>{alert("Error on registration: "+JSON.stringify(s))})})()}showInvalidResponseAlert(){var n=this;return(0,p.Z)(function*(){yield(yield n.alertController.create({header:"Error",message:"Este usuario no es un Agente.",buttons:["OK"]})).present()})()}realizarSolicitudGET(n){var t=this;return(0,p.Z)(function*(){const l=yield t.storage.get("user"),s=yield t.storage.get("access_token");if(l&&l.id&&s){const g=new u.WM({Authorization:`Bearer ${s}`});return t.http.get(t.appUrl+`api/auth/searcher/${l.id}/${n}`,{headers:g})}return new A.y})()}updateData(n){var t=this;return(0,p.Z)(function*(){const l=n.target.value.toLowerCase();yield t.delay(300),yield t.loading.present(),(yield t.realizarSolicitudGET(l)).subscribe(s=>{t.messages=s&&s.error?null:s},s=>{t.messages=null,console.error("Error al realizar la solicitud GET:",s)})})()}delay(n){return new Promise(t=>setTimeout(t,n))}onSearchInputChange(n){n.target.value.toLowerCase(),(!this.searchInput||""===this.searchInput.trim())&&this.ngOnInit()}logout(){var n=this;return(0,p.Z)(function*(){try{const t="";yield n.tokenService.saveToken(t),n.authService.logout(),n.router.navigate(["/login"])}catch(t){console.error("Error al borrar el token:",t)}})()}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(u.eN),e.Y36(a.HT),e.Y36(C.D),e.Y36(Z.K),e.Y36(a.Br),e.Y36(U.e),e.Y36(h.F0),e.Y36(w.B))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-folder"]],decls:15,vars:7,consts:[[3,"translucent"],[1,"title-left"],["slot","start"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[3,"message",4,"ngFor","ngForOf"],[3,"message"],["returnKeyType","Buscar",3,"placeholder","ionChange"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"div")(3,"ion-title",1),e._uU(4," Servicios A\xe9reos Estrella "),e.qZA()(),e.TgZ(5,"ion-buttons",2),e._UZ(6,"ion-menu-button"),e.qZA()()(),e.TgZ(7,"ion-content",3)(8,"ion-refresher",4),e.NdJ("ionRefresh",function(s){return t.refresh(s)}),e._UZ(9,"ion-refresher-content"),e.qZA(),e.YNc(10,L,2,1,"ion-list",5),e.YNc(11,$,5,2,"ion-list",5),e.YNc(12,K,2,0,"ion-list",5),e.YNc(13,G,2,0,"ion-list",5),e.YNc(14,W,2,0,"ion-list",5),e.qZA()),2&n&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngIf","inbox"===t.folder),e.xp6(1),e.Q6J("ngIf","operations"===t.folder),e.xp6(1),e.Q6J("ngIf","profile"===t.folder),e.xp6(1),e.Q6J("ngIf","help"===t.folder),e.xp6(1),e.Q6J("ngIf","notifications"===t.folder))},dependencies:[m.sg,m.O5,a.Sm,a.W2,a.jY,a.Gu,a.q_,a.fG,a.nJ,a.Wo,a.Nd,a.VI,a.wd,a.sr,a.j9,q,k,Q,D],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.title-left[_ngcontent-%COMP%]{text-align:center;color:#085587;font-weight:700}ion-label[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin:0;color:#2c3e52}ion-item[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#085588}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:95%}ion-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{float:right;align-items:center;display:flex}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#c9c9ca}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:15px;margin-right:8px;font-weight:400}ion-item[_ngcontent-%COMP%]   ion-note.md[_ngcontent-%COMP%]{margin-right:14px}.dot[_ngcontent-%COMP%]{display:block;height:12px;width:12px;border-radius:50%;align-self:start;margin:16px 10px 16px 16px}.dot-unread[_ngcontent-%COMP%]{background:var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:11px;font-weight:400}ion-loading.custom-spinner[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]{background:url(saev1.28b372864ba9a0b3.gif) center center no-repeat!important;background-size:contain!important;animation:_ngcontent-%COMP%_spin 2s linear infinite!important;width:40px!important;height:40px!important}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),r})()}];let X=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(V),h.Bz]}),r})(),ee=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,_.u5,a.Pc,h.Bz,u.JF]}),r})(),ne=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,_.u5,a.Pc,h.Bz,u.JF]}),r})(),te=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,_.u5,a.Pc,h.Bz,u.JF]}),r})(),ie=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,_.u5,a.Pc,h.Bz,u.JF]}),r})(),oe=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,_.u5,a.Pc,X,ee,ne,te,ie]}),r})()}}]);