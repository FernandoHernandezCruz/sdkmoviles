"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1298],{1298:(H,Z,p)=>{p.r(Z),p.d(Z,{DetailPaxModule:()=>z});var h=p(6814),i=p(878),f=p(95),u=p(9481),D=p(5861),n=p(6689),P=p(5472),U=p(553),A=p(5078),y=p(9862),b=p(9894);function S(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"ion-thumbnail",1)(2,"a",20),n._UZ(3,"ion-img",21),n.qZA()(),n.BQk()),2&e){const a=n.oxw();n.xp6(2),n.Q6J("href",a.appUrl+(null==a.pax?null:a.pax.pax_pass_img),n.LSH),n.xp6(1),n.Q6J("src",a.appUrl+(null==a.pax?null:a.pax.pax_pass_img))}}function J(e,s){1&e&&(n.TgZ(0,"ion-thumbnail",1),n._UZ(1,"ion-img",22),n.qZA())}function q(e,s){if(1&e){const a=n.EpF();n.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-toggle",23),n.NdJ("ionChange",function(t){n.CHM(a);const l=n.oxw();return n.KtG(l.checkboxChanged(t,"pax_pass_sta"))}),n._uU(3),n._UZ(4,"br"),n.TgZ(5,"ion-note",7),n._uU(6),n.qZA()()(),n.TgZ(7,"ion-item")(8,"ion-label",24),n._uU(9),n.qZA(),n.TgZ(10,"ion-textarea",25),n.NdJ("ngModelChange",function(t){n.CHM(a);const l=n.oxw();return n.KtG(l.pax.passport_image_pax_comments=t)}),n.qZA()(),n.TgZ(11,"ion-row")(12,"ion-col",14)(13,"ion-item")(14,"ion-button",26),n.NdJ("click",function(){n.CHM(a);const t=n.oxw();return n.KtG(t.sendVerify("pax_pass"))}),n._uU(15),n.qZA()()()()()}if(2&e){const a=n.oxw();n.xp6(2),n.Q6J("checked",!0)("checked",1===(null==a.pax?null:a.pax.passport_image_pax_status)),n.xp6(1),n.AsE("",a.translationService.getTranslation("verify")," ",a.translationService.getTranslation("passport"),""),n.xp6(3),n.hij(" ",a.translationService.getTranslation("make"),""),n.xp6(3),n.Oqu(a.translationService.getTranslation("comments")),n.xp6(1),n.Q6J("ngModel",a.pax.passport_image_pax_comments),n.xp6(5),n.hij(" ",a.translationService.getTranslation("verify")," ")}}function k(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"ion-thumbnail",1)(2,"a",20),n._UZ(3,"ion-img",21),n.qZA()(),n.BQk()),2&e){const a=n.oxw();n.xp6(2),n.Q6J("href",a.appUrl+(null==a.pax?null:a.pax.pax_visa_img),n.LSH),n.xp6(1),n.Q6J("src",a.appUrl+(null==a.pax?null:a.pax.pax_visa_img))}}function O(e,s){1&e&&(n.TgZ(0,"ion-thumbnail",1),n._UZ(1,"ion-img",22),n.qZA())}function w(e,s){if(1&e){const a=n.EpF();n.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-toggle",23),n.NdJ("ionChange",function(t){n.CHM(a);const l=n.oxw();return n.KtG(l.checkboxChanged(t,"pax_visa_sta"))}),n._uU(3),n._UZ(4,"br"),n.TgZ(5,"ion-note",7),n._uU(6),n.qZA()()(),n.TgZ(7,"ion-item")(8,"ion-label",24),n._uU(9),n.qZA(),n.TgZ(10,"ion-textarea",25),n.NdJ("ngModelChange",function(t){n.CHM(a);const l=n.oxw();return n.KtG(l.pax.visa_image_pax_comments=t)}),n.qZA()(),n.TgZ(11,"ion-row")(12,"ion-col",14)(13,"ion-item")(14,"ion-button",26),n.NdJ("click",function(){n.CHM(a);const t=n.oxw();return n.KtG(t.sendVerify("pax_visa"))}),n._uU(15),n.qZA()()()()()}if(2&e){const a=n.oxw();n.xp6(2),n.Q6J("checked",!0)("checked",1===(null==a.pax?null:a.pax.visa_image_pax_status)),n.xp6(1),n.hij("",a.translationService.getTranslation("verify")," Visa"),n.xp6(3),n.hij(" ",a.translationService.getTranslation("make"),""),n.xp6(3),n.Oqu(a.translationService.getTranslation("comments")),n.xp6(1),n.Q6J("ngModel",a.pax.visa_image_pax_comments),n.xp6(5),n.Oqu(a.translationService.getTranslation("verify"))}}const v=function(){return[0,1]},N=[{path:"",component:(()=>{var e;class s{constructor(o,t,l,_,c,T){this.route=o,this.sharedDataService=t,this.modalController=l,this.loadingController=_,this.http=c,this.translationService=T,this.appUrl=U.N.apiUrl,this.activatedRoute=(0,n.f3M)(u.gz),this.platform=(0,n.f3M)(P.t4),this.message={passengers:[{passport_image_pax_comments:"",pax_id:0,pax_name:"",pax_parental:"",pax_maternal:""}]}}ngOnInit(){const o=this.activatedRoute.snapshot.paramMap.get("id");this.message=this.sharedDataService.getMessage();const t=o?parseInt(o,10):null;this.message&&this.message.passengers&&(this.pax=this.message.passengers.find(l=>l.pax_id===t),console.info("tag",this.pax))}getBackButtonText(){return this.platform.is("ios")?"Detail Operation":""}checkboxChanged(o,t){this.pax&&("pax_pass_sta"===t&&(this.pax.passport_image_pax_status=o.detail.checked?1:2),"pax_visa_sta"===t&&(this.pax.visa_image_pax_status=o.detail.checked?1:2))}sendVerify(o){var t=this;return(0,D.Z)(function*(){t.loading=yield t.loadingController.create({cssClass:"custom-spinner",spinner:null,translucent:!0,backdropDismiss:!1}),yield t.loading.present();let _,c,l=new FormData;const g={pax_pass:{id:"pax_id",statusKey:"passport_image_pax_status",commentsKey:"passport_image_pax_comments",model:"pax",path:""},pax_visa:{id:"pax_id",statusKey:"visa_image_pax_status",commentsKey:"visa_image_pax_comments",model:"pax",path:""}}[o],C=(r,m,d)=>{let x=d.path?M(t.pax,d.path):t.pax,B=(null==x?void 0:x[m])||(m.includes("status")?0:"");r.append(m,B.toString())};if(g){const r=M(t.pax,g.id);c=null!=r?r:g.id,_=g.model||"ope",C(l,g.statusKey,g),C(l,g.commentsKey,g),l.append("method","_PUT")}function M(r,m){return m.split(".").reduce((d,x)=>(d||{})[x],r)}t.http.post(t.appUrl+"api/update-document/"+_+"/"+c,l).subscribe(r=>{t.modalController.dismiss(),t.loading.dismiss()},r=>{console.error("Error al realizar la solicitud HTTP",r),t.loading.dismiss()})})()}getStatusLabel(o){if(!o)return"Not Verified";switch(o){case 0:return"Not verified";case 1:return"Aprobado";case 2:return"Rechazado";default:return""}}}return(e=s).\u0275fac=function(o){return new(o||e)(n.Y36(u.gz),n.Y36(A.y),n.Y36(i.IN),n.Y36(i.HT),n.Y36(y.eN),n.Y36(b.D))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-detail-pax"]],decls:75,vars:33,consts:[[3,"translucent"],["slot","start"],["defaultHref","/",3,"text"],[3,"fullscreen"],[4,"ngIf","ngIfElse"],["noImage",""],["size","9"],[1,"ion-text-wrap"],[1,"title-pax"],["size","3"],["id","open-passport",1,"custom-button"],["name","list-circle-outline"],[1,"ion-padding"],["trigger","open-passport",3,"initialBreakpoint","breakpoints"],["size","12"],["value","first","size","large"],["slot","header","color","light","size","large"],["slot","content",1,"ion-padding"],["id","open-visa",1,"custom-button"],["trigger","open-visa",3,"initialBreakpoint","breakpoints"],["download","",3,"href"],["alt","SAE",3,"src"],["src","https://www.apricotmaps.com/resources/Pictures/docs/no-image.png","alt","Imagen predeterminada"],["aria-label","Success toggle","color","success",3,"checked","ionChange"],["position","floating"],[3,"ngModel","ngModelChange"],["expand","full",1,"large-btn",3,"click"]],template:function(o,t){if(1&o&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA()()(),n.TgZ(4,"ion-content",3)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),n._uU(8),n.qZA(),n.TgZ(9,"ion-card-subtitle"),n._uU(10),n.qZA()(),n.TgZ(11,"ion-card-content")(12,"ion-list")(13,"ion-item"),n.YNc(14,S,4,2,"ng-container",4),n.YNc(15,J,2,0,"ng-template",null,5,n.W1O),n.TgZ(17,"ion-grid")(18,"ion-row")(19,"ion-col",6)(20,"div",7)(21,"p",8),n._uU(22),n.qZA(),n.TgZ(23,"h4"),n._uU(24),n.TgZ(25,"ion-note"),n._uU(26),n.ALo(27,"date"),n.qZA()()()(),n.TgZ(28,"ion-col",9)(29,"ion-button",10),n._UZ(30,"ion-icon",11),n.qZA()(),n.TgZ(31,"ion-content",12)(32,"ion-modal",13),n.YNc(33,q,16,8,"ng-template"),n.qZA()()(),n.TgZ(34,"ion-grid")(35,"ion-row")(36,"ion-col",14)(37,"ion-accordion-group")(38,"ion-accordion",15)(39,"ion-item",16)(40,"ion-label"),n._uU(41),n.qZA()(),n.TgZ(42,"div",17),n._uU(43),n.qZA()()()()()()()(),n.TgZ(44,"ion-item"),n.YNc(45,k,4,2,"ng-container",4),n.YNc(46,O,2,0,"ng-template",null,5,n.W1O),n.TgZ(48,"ion-grid")(49,"ion-row")(50,"ion-col",6)(51,"div",7)(52,"p",8),n._uU(53,"Visa"),n.qZA(),n.TgZ(54,"h4"),n._uU(55),n.TgZ(56,"ion-note"),n._uU(57),n.ALo(58,"date"),n.qZA()()()(),n.TgZ(59,"ion-col",9)(60,"ion-button",18),n._UZ(61,"ion-icon",11),n.qZA()(),n.TgZ(62,"ion-content",12)(63,"ion-modal",19),n.YNc(64,w,16,7,"ng-template"),n.qZA()()(),n.TgZ(65,"ion-grid")(66,"ion-row")(67,"ion-col",14)(68,"ion-accordion-group")(69,"ion-accordion",15)(70,"ion-item",16)(71,"ion-label"),n._uU(72),n.qZA()(),n.TgZ(73,"div",17),n._uU(74),n.qZA()()()()()()()()()()()()),2&o){const l=n.MAs(16);n.Q6J("translucent",!0),n.xp6(3),n.Q6J("text",t.getBackButtonText()),n.xp6(1),n.Q6J("fullscreen",!0),n.xp6(4),n.HOy("",t.translationService.getTranslation("pax")," : ",null==t.pax?null:t.pax.pax_parental," ",null!=t.pax&&t.pax.pax_maternal?null==t.pax?null:t.pax.pax_maternal:""," ",null==t.pax?null:t.pax.pax_name," "),n.xp6(2),n.Oqu(t.translationService.getTranslation("cardSubtitle")),n.xp6(4),n.Q6J("ngIf",null==t.pax?null:t.pax.pax_pass_img)("ngIfElse",l),n.xp6(8),n.Oqu(t.translationService.getTranslation("passport")),n.xp6(2),n.hij(" ",t.translationService.getTranslation("date")," "),n.xp6(2),n.hij(" ",null!=t.pax&&t.pax.pax_pass_exp?n.xi3(27,25,null==t.pax?null:t.pax.pax_pass_exp,"dd/MM/yyyy, HH:mm"):"Date undefined"," "),n.xp6(6),n.Q6J("initialBreakpoint",1)("breakpoints",n.DdM(31,v)),n.xp6(9),n.Oqu(t.getStatusLabel(null==t.pax?null:t.pax.passport_image_pax_status)),n.xp6(2),n.hij(" ",null==t.pax?null:t.pax.passport_image_pax_comments," "),n.xp6(2),n.Q6J("ngIf",null==t.pax?null:t.pax.pax_visa_img)("ngIfElse",l),n.xp6(10),n.hij(" ",t.translationService.getTranslation("date")," "),n.xp6(2),n.hij(" ",null!=t.pax&&t.pax.pax_visa_exp?n.xi3(58,28,null==t.pax?null:t.pax.pax_visa_exp,"dd/MM/yyyy, HH:mm"):"Date undefined"," "),n.xp6(6),n.Q6J("initialBreakpoint",1)("breakpoints",n.DdM(32,v)),n.xp6(9),n.Oqu(t.getStatusLabel(null==t.pax?null:t.pax.visa_image_pax_status)),n.xp6(2),n.hij(" ",null==t.pax?null:t.pax.visa_image_pax_comments," ")}},dependencies:[h.O5,f.JJ,f.On,i.We,i.eh,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.wI,i.W2,i.jY,i.Gu,i.gu,i.Xz,i.Ie,i.Q$,i.q_,i.uN,i.Nd,i.g2,i.Bs,i.ho,i.sr,i.ki,i.w,i.j9,i.oU,h.uU],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0}.title-pax[_ngcontent-%COMP%]{font-size:17px;font-weight:700}ion-modal[_ngcontent-%COMP%]{--height: auto}.card-content-md[_ngcontent-%COMP%]{padding-inline-end:0px}.item-inner[_ngcontent-%COMP%]{padding-inline-end:0%!important}.large-btn[_ngcontent-%COMP%]{font-size:20px;height:auto;width:100%;line-height:60px;padding-left:20px;padding-right:20px}"],changeDetection:0}),s})()}];let Q=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[u.Bz.forChild(N),u.Bz]}),s})(),z=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[h.ez,f.u5,i.Pc,u.Bz,Q]}),s})()}}]);